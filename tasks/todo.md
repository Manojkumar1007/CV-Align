# CV-Align: How CV Evaluation Works With Local Embeddings

## Updated Findings

The CV evaluation feature in CV-Align works using a local embedding model via Ollama (`embeddinggemma:300m`) to perform semantic similarity analysis. The process is as follows:

1.  **CV Upload**: The user uploads a CV through the React frontend.
2.  **Text Extraction**: The FastAPI backend extracts the text from the document (PDF, DOCX, TXT).
3.  **Local AI Model**: The `rag_engine.py` service uses the `llm_service.py` to interface with the embeddingGemma model via Ollama. This model runs entirely on the local machine and does not require an internet connection or external API keys.
4.  **Vector Similarity**: The model converts the CV text and the job description into numerical vectors. It then calculates the cosine similarity between these vectors to determine the match score.
5.  **Scoring**: The overall score is a weighted average of similarity scores for skills, experience, and education.
6.  **Canned Feedback**: The qualitative feedback (strengths, weaknesses, recommendations) is not generated by a large language model. Instead, it consists of pre-written strings that are selected based on the numerical scores.

This approach provides "AI-powered" features with more advanced embeddings while maintaining local processing.

## Task List

- [x] Investigate the frontend to understand how the CV is uploaded and the evaluation is displayed.
- [x] Trace the backend API call to identify the services involved in the evaluation process.
- [x] Analyze the `rag_engine.py` to determine the underlying AI/ML model being used.
- [x] Confirm that the model is running locally and not making external API calls.
- [x] Update the implementation to use Google's embeddingGemma via Ollama.
- [x] Document the updated process and explain the changes to the user.
- [x] Implement LLM-based evaluation using Gemma 4b model for enhanced scoring
- [x] Replace rule-based feedback with LLM-generated personalized feedback
- [x] Add contextual understanding capabilities using Gemma model
- [x] Implement soft skills assessment using the LLM
- [x] Create appropriate prompts for CV evaluation tasks
- [x] Ensure compatibility of LLM output with existing evaluation result structure
- [x] Update documentation to reflect new LLM-based implementation

## Review

The CV-Align system has been successfully upgraded with LLM-based evaluation capabilities. Key improvements include:

1. **Dual Model Architecture**: The system now uses both embeddingGemma for vector embeddings and Gemma 4b for text generation and evaluation.
2. **Enhanced Scoring**: Instead of simple similarity matching, the system uses LLM-based evaluation for more nuanced scoring of skills, experience, and education.
3. **Personalized Feedback**: The system generates detailed, personalized feedback using LLMs instead of rule-based templates.
4. **Soft Skills Assessment**: The system now evaluates soft skills mentioned in CVs, providing a more comprehensive evaluation.
5. **Contextual Understanding**: The system considers the specific job context and industry requirements when generating evaluations.
6. **Better Prompts**: The system uses carefully crafted prompts to ensure high-quality, relevant evaluations.

These improvements maintain the system's local processing capabilities while offering more sophisticated and personalized CV evaluations.